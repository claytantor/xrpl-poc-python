@startuml xurl_usecase

skinparam usecase {
    BackgroundColor<< xInvoice >> #ffabb0
}

package "xInvoice App" {
    (Scans xURL)
    (Pay xInvoice\nPayment Request) as (PayInvoice)<<xInvoice>>
}
note right
this is the mobile wallet or 
webapp that scans the xURL 
and pays the invoice, current 
proposal is a xumm app plugin
end note

package "xInvoice Backend" {
    (GET Callback)
    (Creates xURL)
    (Generate xInvoice\nPayment Request) as (GenerateInvoice)<<xInvoice>>
    (POST Stateful Reference)
    (Perform Orchestration or\nFiat Conversion) as (Orchestrate)
    (GET Stateful Reference)
}

Requestor-->(Creates xURL)
(Creates xURL)-->(POST Stateful Reference)

Payer-->(Scans xURL)
(Scans xURL)-->(GET Stateful Reference)
(GET Stateful Reference)-->(Orchestrate)
(GET Stateful Reference)-->(GenerateInvoice)

Payer-->(PayInvoice)
(PayInvoice)-->(GET Callback)

note "these are the same use\ncase as xInvoice " as N2
(GenerateInvoice) .. N2
N2 .. (PayInvoice)

@enduml



